:root[data-theme="dark"] {
  color-scheme: dark;
}

.app-shell {
  max-width: 1120px;
  margin: 0 auto;
  padding: 1.25rem;
}

.app-shell.compact .story-card,
.app-shell.compact .detail-content {
  padding: 0.55rem;
}

.skip-link {
  position: absolute;
  top: -40px;
  left: 8px;
  background: #1d4ed8;
  color: #fff;
  padding: 0.4rem 0.6rem;
  border-radius: 6px;
}
.skip-link:focus { top: 8px; }

.eyebrow { margin: 0; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.08em; color: #64748b; }
.subtitle { margin-top: 0.35rem; color: #475569; }
.breadcrumb { margin-top: 0.35rem; font-size: 0.9rem; color: #334155; }

.tab-nav { display: flex; gap: 0.5rem; flex-wrap: wrap; margin: 0.8rem 0 1rem; }
.tab { border: 1px solid #cbd5e1; background: #f8fafc; }
.tab.active { background: #1d4ed8; color: #fff; border-color: #1d4ed8; }

.panel { border: 1px solid #e2e8f0; border-radius: 12px; padding: 1rem; background: #fff; }
.daily-meta { display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 0.75rem; }
.daily-meta p { margin: 0; }
.done-banner { margin: 0.5rem 0 0; background: #dcfce7; color: #166534; border-radius: 8px; padding: 0.5rem 0.75rem; }

.skeleton-grid { display: grid; gap: 0.75rem; grid-template-columns: repeat(3, minmax(0, 1fr)); }
.skeleton-card { height: 130px; border-radius: 10px; background: linear-gradient(90deg, #e2e8f0, #f1f5f9, #e2e8f0); background-size: 200% 100%; animation: pulse 1.2s infinite; }
@keyframes pulse { from { background-position: 200% 0; } to { background-position: -200% 0; } }

.priority-section { margin-top: 1.25rem; }
.priority-section h2 { margin-bottom: 0.75rem; }
.cluster-grid { display: grid; gap: 0.85rem; grid-template-columns: repeat(4, minmax(0, 1fr)); }

.story-card { border: 1px solid #cbd5e1; border-radius: 10px; padding: 0.85rem; background: #f8fafc; min-height: 220px; }
.story-card.is-read { opacity: 0.68; }
.story-heading { display: flex; align-items: center; gap: 0.6rem; }
.story-thumb { width: 2.2rem; height: 2.2rem; border-radius: 8px; border: 1px solid #cbd5e1; object-fit: cover; background: #fff; flex: 0 0 auto; }
.story-card h3 { margin: 0; font-size: 1rem; }

.label-row { margin-top: 0.65rem; display: flex; gap: 0.45rem; flex-wrap: wrap; }
.label-row span { border: 1px solid #cbd5e1; border-radius: 999px; padding: 0.2rem 0.55rem; font-size: 0.8rem; background: #fff; }
.label-high { border-color: #16a34a !important; color: #166534; }
.label-med { border-color: #f59e0b !important; color: #92400e; }
.label-low { border-color: #dc2626 !important; color: #991b1b; }

.trace { margin: 0.65rem 0; color: #334155; }
.actions { display: flex; flex-wrap: wrap; gap: 0.45rem; }
.actions button { border: 1px solid #cbd5e1; background: #fff; min-height: 36px; }
.actions button.bookmarked { background: #fef3c7; border-color: #f59e0b; color: #92400e; }

.detail-panel { margin-top: 1.25rem; border-top: 1px solid #e2e8f0; padding-top: 1rem; }
.detail-header { display: flex; justify-content: space-between; align-items: center; gap: 0.75rem; }
.detail-header h2 { margin: 0; }
.detail-title { margin: 0.6rem 0; font-weight: 600; }
.detail-tabs { display: flex; flex-wrap: wrap; gap: 0.45rem; margin-bottom: 0.65rem; }
.detail-tab { border: 1px solid #cbd5e1; background: #fff; transition: 0.2s ease; }
.detail-tab.active { background: #1d4ed8; color: #fff; border-color: #1d4ed8; }
.detail-content { border: 1px solid #e2e8f0; border-radius: 10px; background: #f8fafc; padding: 0.8rem; }
.coverage-matrix { display: grid; grid-template-columns: 1fr 1fr; gap: 0.8rem; }
.coverage-item + .coverage-item { margin-top: 0.75rem; border-top: 1px solid #cbd5e1; padding-top: 0.75rem; }
.alt-item { border-top: 1px dashed #cbd5e1; margin-top: 0.4rem; padding-top: 0.4rem; }
.what-if { color: #475569; font-style: italic; }

.placeholder { min-height: 220px; }
.preset-row { display: flex; flex-wrap: wrap; gap: 0.4rem; margin-bottom: 0.8rem; }
.settings-grid { display: grid; gap: 0.75rem; margin-top: 0.75rem; }
.settings-row { display: grid; grid-template-columns: 220px 1fr; align-items: center; gap: 0.5rem; }
.settings-row input,
.settings-row select,
.chips-input input,
.archive-controls select {
  padding: 0.4rem 0.5rem;
  border-radius: 8px;
  border: 1px solid #cbd5e1;
}

.chips-editor { margin-top: 1rem; }
.chips-editor h3 { margin-bottom: 0.45rem; }
.chips-input { display: flex; gap: 0.5rem; }
.chips { display: flex; flex-wrap: wrap; gap: 0.45rem; margin-top: 0.5rem; }

.source-card { border: 1px solid #cbd5e1; border-radius: 8px; padding: 0.65rem; background: #f8fafc; }
.archive-controls { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem; }
.archive-meta { margin-top: 0.4rem; color: #475569; }

.error { color: #991b1b; border: 1px solid #fecaca; background: #fef2f2; padding: 0.75rem; border-radius: 8px; }
.loading,
.empty-copy { color: #475569; }

@media (max-width: 1100px) {
  .cluster-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 760px) {
  .cluster-grid,
  .skeleton-grid,
  .coverage-matrix {
    grid-template-columns: 1fr;
  }

  .settings-row {
    grid-template-columns: 1fr;
  }

  .actions {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
